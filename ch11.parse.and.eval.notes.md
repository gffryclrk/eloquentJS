# Egg Language Parser Notes

Working through Chapter 11 of Eloquent JavaScript.
Code reference: ch11.parse.and.eval.js

## 1st Iteration

run() first call: (line 150)
	
run() function first defines environemnt variable by creating an instance of topEnv (line 144). Next run creates array of all arguments passed to it and then joins that array together into a long string using newline characters (line 145).

	var program = Array.prototype....
	returns:

	"do(define(total, 0),
		define(count, 1),
		while(<(count, 11),
			do(define(total, +(total, count)),
				define(count, +(count, 1)))),
		print(total))"

	So program is above string.

run() then returns call to evaluate, where parse(program) is passed as an argument along with env variable. (line 147)

parse(program) defines result variable as return value on call to to parseExpression(program) (line 44)

parseExpression(program) passes program variable to skipSpace() (line 2). skipSpace() makes no changes to string because first character is "d" (line 22).

first characters in string: "do " match third regex: /^[^\s(),"]+/ and so 

expr = {type: "word", name: "do" };

parseExpression then returns parseApply(expr, program) where program becomes:

"(define(total, 0),
	define(count, 1),
	while(<(count, 11),
		do(define(total, +(total, count)),
			define(count, +(count, 1)))),
	print(total))"

parseApply attempts to remove spaces from beginning of program string (line 26) and makes no changes becasue first character is '('. if first character in program is not '('' parseApply() would return an object. However, since it is a '(' character parseApply function slices the first character from the program string (line 31). expr object is defined containing type "apply", operator "expr" and args an empty array (line 32.) parseApply() then enters while loop which will break upon encountering close parenthesis ')'. Defines arg variable as parseExpression return of program in current state (line 34).

## 2nd Iteration

parseExpression() function is passed the following string: 

"define(total, 0),
	define(count, 1),
	while(<(count, 11),
		do(define(total, +(total, count)),
			define(count, +(count, 1)))),
	print(total))"

